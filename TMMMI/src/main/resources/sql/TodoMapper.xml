<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="TodoMapper">

		<resultMap id="TodoSelectMap" type="com.tmmmi.service.domain.ToDo">
		<result property="toDoNo" column="todo_no" jdbcType="NUMERIC"/>
		<result property="userNo" column="user_no" jdbcType="NUMERIC"/>
		<result property="toDoDetail" column="todo_detail" jdbcType="VARCHAR"/>
		<result property="toDoStartDate" column="todo_start_date" jdbcType="DATE"/>
		<result property="toDoEndDate" column="todo_end_date" jdbcType="DATE"/>
		<result property="toDoCompleteNo" column="todo" jdbcType="NUMERIC"/>
		<result property="toDoDeleteCheckDateList" column="todo_delete_check" jdbcType="DATE"/>
		</resultMap>	
		
		<insert id="addTodo" parameterType="com.tmmmi.service.domain.ToDo">
			INSERT INTO todo (todo_no, user_no, todo_detail, todo_start_date, todo_end_date, todo_delete_check)
			VALUES (todo_no.nextval, 7, #{toDoDetail}, #{toDoStartDate}, #{toDoEndDate}, 0)
		</insert>
		
		<update id="updateTodo" parameterType="com.tmmmi.service.domain.ToDo">
			UPDATE todo
		<set>
			todo_detail = #{toDoDetail},
			todo_end_date = #{toDoEndDate}
		</set>
		WHERE todo_no = #{toDoNo}
		</update>
		
		<select id="getTodoList" parameterType="map" resultMap="TodoSelectMap">
			SELECT *
			FROM todo t, todo_complete tc
			WHERE t.todo_no = tc.todo_no(+)
			AND user_no = #{user_no}
		</select>
</mapper>