<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ScheduleMapper">
	
	<resultMap id="scheduleSelectMap" type="com.tmmmi.service.domain.Schedule">
		<result property="scheduleNo"			column="schedule_no"			jdbcType="NUMERIC" />
		<result property="userNo"				column="user_no"				jdbcType="NUMERIC" />
		<result property="userCategoryNo"		column="user_category_no"		jdbcType="NUMERIC" />
		<result property="scheduleTitle"		column="schedule_title"			jdbcType="VARCHAR" />
		<result property="scheduleDetail"		column="schedule_detail" 		jdbcType="VARCHAR" />
		<result property="scheduleStartDate"	column="schedule_start_date" 	jdbcType="DATE" />
		<result property="scheduleEndDate"		column="schedule_end_date" 		jdbcType="DATE" />
		<result property="scheduleLocation"		column="schedule_location" 		jdbcType="VARCHAR" />
		<result property="scheduleDDay"			column="schedule_dday" 			jdbcType="NUMERIC" />
		<result property="scheduleImportant"	column="schedule_important" 	jdbcType="NUMERIC" />
		<result property="scheduleAlarmTime"	column="schedule_alarm_time" 	jdbcType="DATE" />
	</resultMap>
	
	<insert id="addSchedule" parameterType="com.tmmmi.service.domain.Schedule">
	 	INSERT
		INTO schedule ( schedule_no , user_no , user_category_no , schedule_title, schedule_detail, schedule_start_date, schedule_end_date, schedule_location, schedule_dday, schedule_important, schedule_alarm_time ) 
		VALUES ( schedule_no.nextval ,
				#{userNo} , 
				#{userCategoryNo} ,
				#{userCategoryName}
				)
	 </insert>
	 
	 <select  id="getScheduleList"  parameterType="java.lang.Integer"	resultMap="scheduleSelectMap">
	 	SELECT *
	 	FROM user_category
	 	WHERE user_no = #{userNo}
	 </select>
	 
	 <update id="updateSchedule" parameterType="com.tmmmi.service.domain.Schedule" >
	   	UPDATE user_category
	   	<set>
	   		user_category_color = #{userCategoryColor} ,
			user_category_name	= #{userCategoryName}
	   	</set>
	   	WHERE user_category_no = #{userCategoryNo}
	 </update>
	 
	 <delete id="deleteSchedule" parameterType="com.tmmmi.service.domain.Schedule">
	 	DELETE
	 	FROM user_category
	 	WHERE user_category_no = #{userCategoryNo}
	 </delete>
	 
</mapper>